<link rel="stylesheet" href="/css/nav_bar.css">
<link rel="stylesheet" href="/css/userpage.css">
<link rel="stylesheet" href="/css/function.css">
<link rel="stylesheet" href="/css/article.css">
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />


<body>

    {{> nav_bar_login}}

    <div class="main">

        {{> function}}

        <div class="container">
            <h1>Profile Page</h1>
            {{#if author}}
                <h2>Author Profile:</h2>
                <p><img src="{{profileAvatar}}" width = "40">Author: {{author}}</p>
                <p>Profile: {{profile}}</p>
                {{#if NotSameUser}}
                    {{#if subscribe}}
                        <form action="./unsubsribe" method="GET">
                            <input type="hidden" id="author" name="author" value="{{author}}">
                            <button type="submit">Unsubsribe</button>
                        </form>
                    {{else}}
                        <form action="./subsribe" method="GET">
                            <input type="hidden" id="author" name="author" value="{{author}}">
                            <button type="submit">Subsribe</button>
                        </form>
                    {{/if}}
                {{/if}}
                {{#if articles}}
                <ul name="articleUL">
                    {{#each articles}}
                    <li>
                        {{> article}}
                        <form action="./deleteArticle" method="POST">
                            <input type="hidden" id="delete" name="delete" value="{{this.id}}">
                            <button type="submit">Delete!</button>
                        </form>
                        <form action="./editArticle" method="POST">
                            <input type="hidden" id="edit" name="edit" value="{{this.id}}">
                            <button type="submit">Edit!</button>
                        </form>
                    </li>
                    {{/each}}
                </ul>
                {{else}}
                    <p>No matching articles</p>
                {{/if}}
            {{/if}}
            {{#if subscriber}}
                <h2>Subscriber Profile:</h2>
                <p><img src="{{profileAvatar}}" width = "40">Subscriber: {{subscriber}}</p>
                <p>Profile: {{profile}}</p>
                {{#if NotSameUser}}
                    {{#if subscribe}}
                        <form action="./unsubsribe" method="GET">
                            <input type="hidden" id="subscriber" name="subscriber" value="{{subscriber}}">
                            <button type="submit">Remove subscriber</button>
                        </form>
                    {{/if}}
                {{/if}}
                {{#if articles}}
                <ul name="articleUL">
                    {{#each articles}}
                    <li>
                        {{> article}}
                        <form action="./deleteArticle" method="POST">
                            <input type="hidden" id="delete" name="delete" value="{{this.id}}">
                            <button type="submit">Delete!</button>
                        </form>
                        <form action="./editArticle" method="POST">
                            <input type="hidden" id="edit" name="edit" value="{{this.id}}">
                            <button type="submit">Edit!</button>
                        </form>
                    </li>
                    {{/each}}
                </ul>
                {{else}}
                    <p>No matching articles</p>
                {{/if}}
            {{/if}}
        </div>
</body>