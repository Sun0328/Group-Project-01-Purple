<head>
  <script
    type="text/javascript"
    src='https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js'
    referrerpolicy="origin">
  </script>
  <script type="text/javascript">
  tinymce.init({
    selector: '#myTextarea',
    init_instance_callback : function(editor) {
    var freeTiny = document.querySelector('.tox .tox-notification--in');
    freeTiny.style.display = 'none';
    },
    width: 600,
    height: 300,
    plugins: 'lists',
    toolbar: 'undo redo | styles | bold italic | alignleft aligncenter alignright alignjustify | ' +
      'bullist numlist outdent indent | preview fullscreen | ' +
      'forecolor backcolor emoticons | help',
    menubar: 'edit view format tools table help',
    content_css: 'css/content.css'
  });
  </script>
</head>

<body>
    <form action="./submitChange" method="POST"> 
          
        <label for="title">Title:</label>
        <input type="text" name="title" id="title" value="{{article.header}}">
        <input type="hidden" name="id" id="id" value="{{articleID}}">
        <br>
        <textarea id="myTextarea" name="content">{{{article.content}}}</textarea>

        <label for="image">Choose your article image:</label>
        <br>
        {{#if files}}
        <select id="selectImage" name="image">
            <option value="">Do not display image</option>
            {{#each files}}
            <option value="{{this}}">{{this}}</option>
            {{/each}}
        </select>
        {{else}}
        <p>No existing images. Please Upload.</p>
        {{/if}}
        <button type="submit">Submit changes!</button>
    </form>
</body>
{{#if article.image}}
<img src="/uploadedFiles/{{article.user_id}}/{{article.image}}" width="500">
{{else}}
<p>No existing article image</p>
{{/if}}

<div class="container">
    <h1>Image uploads!</h1>

    <div class="card">
        <div class="card-body">
            <form action="./uploadImage" method="POST" enctype="multipart/form-data">
                <input type="hidden" name="user_id" id="user_id" value="{{article.user_id}}">
                <div class="form-group">
                    <label for="inpFile">Upload an image here!</label>
                    <input id="inpFile" type="file" name="imageFile" accept=".png,.jpg,.jpeg,.bmp">
                    
                </div>

                <div class="form-group align-start">
                    <button type="submit">Upload!</button>
                </div>

            </form>
        </div>
    </div>
</div>
<script>
    if (sessionStorage.getItem('refreshPage')){
        sessionStorage.removeItem('refreshPage');
        location.reload();
    }
</script>